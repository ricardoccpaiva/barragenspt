<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="Description" content="Vê num mapa o estado de armazenamento das barragens em Portugal">
  <meta name="Keywords" content="barragens, albufeiras, água, seca, chuva">
  <meta property="og:title" content="Barragens.pt - Início">
  <meta property="og:site_name" content="Barragens.pt">
  <meta property="og:url" content="https://barragens.pt/">
  <meta property="og:description" content="Vê num mapa o estado de armazenamento das barragens em Portugal">
  <meta property="og:type" content="website">
  <meta property="og:image" content="https://barragens.pt/images/dam.png">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Barragens.pt - Início">
  <meta name="twitter:description" content="Vê num mapa o estado de armazenamento das barragens em Portugal">
  <meta name="twitter:image" content="https://barragens.pt/images/dam_large.png">
  <%= csrf_meta_tag() %>
    <%= live_title_tag assigns[:page_title] || "barragens.pt" %>
      <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/bulma-extensions@6.2.4/dist/css/bulma-extensions.min.css">
      <link phx-track-static rel="stylesheet" href={Routes.static_path(@conn, "/assets/app.css" )} />
      <script defer phx-track-static type="text/javascript" src={Routes.static_path(@conn, "/assets/app.js" )}></script>
      <script src='https://api.mapbox.com/mapbox-gl-js/v2.3.1/mapbox-gl.js'></script>
      <link href='https://api.mapbox.com/mapbox-gl-js/v2.3.1/mapbox-gl.css' rel='stylesheet' />
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
      <script type="text/javascript"
        src="https://cdn.jsdelivr.net/npm/bulma-quickview@2.0.0/dist/js/bulma-quickview.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/antv-g2/4.1.49/g2.min.js"></script>
      <!-- Global site tag (gtag.js) - Google Analytics -->
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-5ECR8CXBPZ"></script>
      <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-5ECR8CXBPZ');
      </script>
      <script type="text/javascript">
        function showLastUpdatedAtInfo(){
          document.getElementById("last_updated_at_info").style.display = 'block';
        }

        function hideLastUpdatedAtInfo(){
          document.getElementById("last_updated_at_info").style.display = 'none';
        }
      </script>
</head>

<body>
  <style>
    @font-face {
      font-family: orangeJuice;
      src: url('../fonts/FredokaOne-Regular.ttf');
    }

    .map-overlay {
      position: absolute;
      width: 200px;
      height: 42px;
      top: 10px;
      margin-left: 20px;
      background-image: url("../images/dam.png");
      background-repeat: no-repeat;
      background-size: 48px;
    }
  </style>
  <%= @inner_content %>
    <div style="height: 100%;">
      <input id="mapbox_token" type="hidden" value={System.get_env("MAPBOX_API_TOKEN")} />
      <div id='map' style="height: 100%;" phx-update="ignore"></div>

      <div class="map-overlay top">
        <a href="/"><span class="logo-text">BARRAGENS.PT</span></a>
        <a data-phx-link='patch' data-phx-link-state='push' href="/basin/23" id="basin_detail_btn"
          style="display:none"></a>
        <a id="quick_panel_button" style="display:none" data-show="quickview" data-target="quickviewDefault"></a>
      </div>

      <div id="credits-modal" class="modal">
      <div class="modal-background"></div>
        <div class="modal-content">
          <div class="box">
            <article class="media">
              <div class="media-left">
                <figure class="image is-64x64">
                  <img src="images/dam.png" alt="Image">
                </figure>
              </div>
              <div class="media-content">
                <div class="content">
                  <p>Dados obtidos através do portal do <a href="https://snirh.apambiente.pt/">SNIRH</a></p>
                  <p>Código fonte <a href="https://github.com/ricardoccpaiva/barragenspt"><i class='fa-brands fa-github'></i></a></p>
                  <p>Desenhado e implementado por <a href="https://twitter.com/ricardoccpaiva">@ricardoccpaiva</a></p>
                  <p>Logo by <a href="https://www.flaticon.com/free-icons/dam" title="dam icons">Freepik</a></p>
                </div>
              </div>
            </article>
          </div>
        </div>
        <button class="modal-close is-large" aria-label="close"></button>
      </div>

      <div class="credits">
        <button class="js-modal-trigger credits-btn" data-target="credits-modal">
          Acerca <i class="fa-solid fa-lg fa-circle-info"></i>
        </button>
      </div>

      <div class="legend">
        <p><b>% Armazenamento</b></p>
        <div><span style="background-color: #ff675c"></span>0 - 20</div>
        <div><span style="background-color: #ffc34a"></span>21 - 40</div>
        <div><span style="background-color: #ffe99c"></span>41 - 50</div>
        <div><span style="background-color: #c2faaa"></span>51 - 60</div>
        <div><span style="background-color: #a6d8ff"></span>61 - 80</div>
        <div><span style="background-color: #1c9dff"></span>81 - 100</div>
      </div>
    </div>
</body>

</html>
